<!DOCTYPE html>
<html lang="en" class="bg-zinc-50 dark:bg-zinc-800 text-zinc-800 dark:text-zinc-50 font-serif">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ruby's Time vs DateTime classes – Chris Mytton</title>

    <meta property="og:title" content="Ruby's Time vs DateTime classes">
    <meta name="author" content="Chris Mytton">
    <meta property="og:locale" content="en_GB">
    <meta name="description" content="In Ruby when should you use `Time` vs `DateTime`, and why?">
    <meta property="og:description" content="In Ruby when should you use `Time` vs `DateTime`, and why?">
    <link rel="canonical" href="https://www.chrismytton.com/2020/02/18/ruby-time-vs-datetime/">
    <meta property="og:url" content="https://www.chrismytton.com/2020/02/18/ruby-time-vs-datetime/">
    <meta property="og:site_name" content="Chris Mytton">
    
    <meta property="og:image" content="https://www.chrismytton.com/assets/images/profile-October-2019-square.jpg">
    <meta property="twitter:image" content="https://www.chrismytton.com/assets/images/profile-October-2019-square.jpg">
    
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="Ruby's Time vs DateTime classes">
    <meta name="twitter:site" content="@chrismytton">
    <meta name="twitter:creator" content="@chrismytton">

    <link href="/tailwind.css" rel="stylesheet">
    <link href="/syntax-highlighting.css" rel="stylesheet">
    <link href="/lite-yt-embed.css" rel="stylesheet">
    <link type="application/atom+xml" rel="alternate" href="/index.xml" title="Chris Mytton">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.png">
    <script type="speculationrules">
    {
      "prerender": [{
        "where": {
          "href_matches": "/*"
        },
        "eagerness": "moderate"
      }]
    }
    </script>
    <script src="/lite-yt-embed.js"></script>
  </head>

  <body class="container mx-auto px-6 py-10 mb-10">
    <div class="mx-auto max-w-prose">
      <header class="pb-8 mb-6 border-b border-zinc-200 dark:border-zinc-700">
        <div class="flex flex-wrap gap-4 items-center mb-6">
          <a class="mr-auto font-display font-semibold text-4xl text-accent hover:text-accent-hover transition-colors" href="/">Chris Mytton</a>

          <div class="flex flex-wrap gap-3">
  <a class="hover:text-[#ff0000] transition-colors duration-200" target="_blank" rel="noopener noreferrer me" href="https://www.youtube.com/chrismytton" title="Subscribe to my YouTube channel" aria-label="Subscribe to my YouTube channel">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M23,9.71a8.5,8.5,0,0,0-.91-4.13,2.92,2.92,0,0,0-1.72-1A78.36,78.36,0,0,0,12,4.27a78.45,78.45,0,0,0-8.34.3,2.87,2.87,0,0,0-1.46.74c-.9.83-1,2.25-1.1,3.45a48.29,48.29,0,0,0,0,6.48,9.55,9.55,0,0,0,.3,2,3.14,3.14,0,0,0,.71,1.36,2.86,2.86,0,0,0,1.49.78,45.18,45.18,0,0,0,6.5.33c3.5.05,6.57,0,10.2-.28a2.88,2.88,0,0,0,1.53-.78,2.49,2.49,0,0,0,.61-1,10.58,10.58,0,0,0,.52-3.4C23,13.69,23,10.31,23,9.71ZM9.74,14.85V8.66l5.92,3.11C14,12.69,11.81,13.73,9.74,14.85Z"/></svg>
  </a>
  
  <a class="hover:opacity-70 transition-opacity duration-200" target="_blank" rel="noopener noreferrer me" href="https://github.com/chrismytton" title="Visit my GitHub" aria-label="Visit my GitHub">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
  </a>
  <a class="hover:text-[#ee802f] transition-colors duration-200" target="_blank" rel="noopener noreferrer" href="/index.xml" title="Subscribe to my feed" aria-label="Subscribe to my feed">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
  </a>
</div>

        </div>
        <div class="flex flex-wrap gap-5 text-xl font-sans">
  <a class="link-subtle" href="/">Home</a>
  <a class="link-subtle" href="/articles/">Articles</a>
  <a class="link-subtle" href="/videos/">Videos</a>
</div>

      </header>

      <main class="mb-20">
        <div class="post">
  <article class="mx-auto prose prose-zinc dark:prose-invert prose-h1:font-display prose-h1:font-semibold prose-h2:font-display prose-h2:font-semibold prose-h3:font-display prose-h3:font-medium prose-a:text-accent prose-a:no-underline hover:prose-a:text-accent-hover prose-a:transition-colors">
    <header class="post-header mb-8 mt-8">
      <h1 class="post-title mb-2 text-pretty">Ruby's Time vs DateTime classes</h1>
      <p class="text-zinc-600 dark:text-zinc-400 text-sm font-sans not-prose">Published 18 February 2020</p>
    </header>

    <div class="post-content">
      
<p><a href="https://www.ruby-lang.org/">Ruby</a> has two classes, <code>Time</code> <sup id="fnref:two-time-classes"><a href="#fn:two-time-classes" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> and <code>DateTime</code>, that look quite similar at a glance. They both have methods for dealing with dates and times. Which should you choose when you need to work with dates and times in Ruby? Ruby’s documentation contains the answer:</p>

<blockquote>
  <p>It’s a common misconception that William Shakespeare and Miguel de Cervantes died on the same day in history - so much so that UNESCO named April 23 as World Book Day because of this fact. However, because England hadn’t yet adopted the Gregorian Calendar Reform (and wouldn’t until 1752) their deaths are actually 10 days apart. Since Ruby’s <code>Time</code> class implements a proleptic Gregorian calendar and has no concept of calendar reform there’s no way to express this with <code>Time</code> objects. This is where <code>DateTime</code> steps in:</p>

  <pre><code>shakespeare = DateTime.iso8601('1616-04-23', Date::ENGLAND)
 #=&gt; Tue, 23 Apr 1616 00:00:00 +0000
cervantes = DateTime.iso8601('1616-04-23', Date::ITALY)
 #=&gt; Sat, 23 Apr 1616 00:00:00 +0000
</code></pre>

  <p>Already you can see something is weird - the days of the week are different. Taking this further:</p>

  <pre><code>cervantes == shakespeare
 #=&gt; false
(shakespeare - cervantes).to_i
 #=&gt; 10
</code></pre>

  <p>This shows that in fact they died 10 days apart (in reality 11 days since Cervantes died a day earlier but was buried on the 23rd). We can see the actual date of Shakespeare’s death by using the gregorian method to convert it:</p>

  <pre><code>shakespeare.gregorian
 #=&gt; Tue, 03 May 1616 00:00:00 +0000 So there's an argument that all the celebrations that take place on the 23rd April in Stratford-upon-Avon are actually the wrong date since England is now using the Gregorian calendar. You can see why when we transition across the reform date boundary:

# start off with the anniversary of Shakespeare's birth in 1751
shakespeare = DateTime.iso8601('1751-04-23', Date::ENGLAND)
 #=&gt; Tue, 23 Apr 1751 00:00:00 +0000

# add 366 days since 1752 is a leap year and April 23 is after February 29
shakespeare + 366
 #=&gt; Thu, 23 Apr 1752 00:00:00 +0000

# add another 365 days to take us to the anniversary in 1753
shakespeare + 366 + 365
 #=&gt; Fri, 04 May 1753 00:00:00 +0000
</code></pre>

  <p>As you can see, if we’re accurately tracking the number of solar years since Shakespeare’s birthday then the correct anniversary date would be the 4th May and not the 23rd April.</p>

  <p>So when should you use DateTime in Ruby and when should you use Time? Almost certainly you’ll want to use Time since your app is probably dealing with current dates and times. However, if you need to deal with dates and times in a historical context you’ll want to use DateTime to avoid making the same mistakes as UNESCO. If you also have to deal with timezones then best of luck - just bear in mind that you’ll probably be dealing with local solar times, since it wasn’t until the 19th century that the introduction of the railways necessitated the need for Standard Time and eventually timezones.</p>
</blockquote>

<p>From “<a href="https://ruby-doc.org/stdlib-2.7.0/libdoc/date/rdoc/DateTime.html#class-DateTime-label-When+should+you+use+DateTime+and+when+should+you+use+Time-3F">When should you use <code>DateTime</code> and when should you use <code>Time</code>?</a>” in the Ruby stdlib <code>DateTime</code> documentation.</p>

<h2 id="summary">Summary</h2>

<ul>
  <li>Use <code>Time</code> when dealing with near-past, present or future dates. It can technically represent dates from 1823-11-12 to 2116-02-20.</li>
  <li>Use <code>DateTime</code> when you want to accurately model distant past dates, like Shakespeare’s birthday.</li>
  <li>So for most applications use <code>Time</code>.</li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:two-time-classes">
      <p>There are actually <em>two</em> <code>Time</code> classes, one in core and one in the standard library which you get when you or one of your dependencies does a <code>require 'time'</code>. <a href="#fnref:two-time-classes" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

    </div>

    <footer class="mt-12 pt-6 not-prose">
      
        <div class="post-tags">
          <p class="text-sm text-zinc-600 dark:text-zinc-400 font-sans">
            
            <a class="text-accent hover:text-accent-hover transition-colors" href="/tags/#programming">#programming</a>
            
          </p>
        </div>
      
    </footer>

  </article>

</div>

      </main>

      <footer class="mt-20 pt-10 border-t border-zinc-200 dark:border-zinc-700">
        <div class="flex items-center mb-6">
          <a class="mr-auto font-display font-semibold text-4xl text-accent hover:text-accent-hover transition-colors" href="/">Chris Mytton</a>

        </div>
        <div class="flex flex-wrap gap-5 text-xl font-sans">
  <a class="link-subtle" href="/">Home</a>
  <a class="link-subtle" href="/articles/">Articles</a>
  <a class="link-subtle" href="/videos/">Videos</a>
</div>

      </footer>
    </div>

  </body>

</html>
