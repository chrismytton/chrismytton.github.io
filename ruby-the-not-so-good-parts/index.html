<!DOCTYPE html>
<html lang="en" class="bg-zinc-50 dark:bg-zinc-800 text-zinc-800 dark:text-zinc-50 font-serif">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ruby: The not so good parts – Chris Mytton</title>

    <meta property="og:title" content="Ruby: The not so good parts">
    <meta name="author" content="Chris Mytton">
    <meta property="og:locale" content="en_GB">
    <meta name="description" content="Shining a light on the dark corners of Ruby.">
    <meta property="og:description" content="Shining a light on the dark corners of Ruby.">
    <link rel="canonical" href="https://www.chrismytton.com/ruby-the-not-so-good-parts/">
    <meta property="og:url" content="https://www.chrismytton.com/ruby-the-not-so-good-parts/">
    <meta property="og:site_name" content="Chris Mytton">
    
    <meta property="og:image" content="https://www.chrismytton.com/assets/images/profile-October-2019-square.jpg">
    <meta property="twitter:image" content="https://www.chrismytton.com/assets/images/profile-October-2019-square.jpg">
    
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="Ruby: The not so good parts">
    <meta name="twitter:site" content="@chrismytton">
    <meta name="twitter:creator" content="@chrismytton">

    <link href="/tailwind.css" rel="stylesheet">
    <link href="/syntax-highlighting.css" rel="stylesheet">
    <link href="/lite-yt-embed.css" rel="stylesheet">
    <link type="application/atom+xml" rel="alternate" href="/index.xml" title="Chris Mytton">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.png">
    <script type="speculationrules">
    {
      "prerender": [{
        "where": {
          "href_matches": "/*"
        },
        "eagerness": "moderate"
      }]
    }
    </script>
    <script src="/lite-yt-embed.js"></script>
  </head>

  <body class="container mx-auto px-6 py-10 mb-10">
    <div class="mx-auto max-w-prose">
      <header class="pb-8 mb-6 border-b border-zinc-200 dark:border-zinc-700">
        <div class="flex flex-wrap gap-4 items-center mb-6">
          <a class="mr-auto font-display font-semibold text-4xl text-accent hover:text-accent-hover transition-colors" href="/">Chris Mytton</a>

          <div class="flex flex-wrap gap-3">
  <a class="hover:text-[#ff0000] transition-colors duration-200" target="_blank" rel="noopener noreferrer me" href="https://www.youtube.com/chrismytton" title="Subscribe to my YouTube channel" aria-label="Subscribe to my YouTube channel">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M23,9.71a8.5,8.5,0,0,0-.91-4.13,2.92,2.92,0,0,0-1.72-1A78.36,78.36,0,0,0,12,4.27a78.45,78.45,0,0,0-8.34.3,2.87,2.87,0,0,0-1.46.74c-.9.83-1,2.25-1.1,3.45a48.29,48.29,0,0,0,0,6.48,9.55,9.55,0,0,0,.3,2,3.14,3.14,0,0,0,.71,1.36,2.86,2.86,0,0,0,1.49.78,45.18,45.18,0,0,0,6.5.33c3.5.05,6.57,0,10.2-.28a2.88,2.88,0,0,0,1.53-.78,2.49,2.49,0,0,0,.61-1,10.58,10.58,0,0,0,.52-3.4C23,13.69,23,10.31,23,9.71ZM9.74,14.85V8.66l5.92,3.11C14,12.69,11.81,13.73,9.74,14.85Z"/></svg>
  </a>
  
  <a class="hover:opacity-70 transition-opacity duration-200" target="_blank" rel="noopener noreferrer me" href="https://github.com/chrismytton" title="Visit my GitHub" aria-label="Visit my GitHub">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
  </a>
  <a class="hover:text-[#ee802f] transition-colors duration-200" target="_blank" rel="noopener noreferrer" href="/index.xml" title="Subscribe to my feed" aria-label="Subscribe to my feed">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
  </a>
</div>

        </div>
        <div class="flex flex-wrap gap-5 text-xl font-sans">
  <a class="link-subtle" href="/">Home</a>
  <a class="link-subtle" href="/articles/">Articles</a>
  <a class="link-subtle" href="/videos/">Videos</a>
</div>

      </header>

      <main class="mb-20">
        <div class="post">
  <article class="mx-auto prose prose-zinc dark:prose-invert prose-h1:font-display prose-h1:font-semibold prose-h2:font-display prose-h2:font-semibold prose-h3:font-display prose-h3:font-medium prose-a:text-accent prose-a:no-underline hover:prose-a:text-accent-hover prose-a:transition-colors">
    <header class="post-header mb-8 mt-8">
      <h1 class="post-title mb-2 text-pretty">Ruby: The not so good parts</h1>
      <p class="text-zinc-600 dark:text-zinc-400 text-sm font-sans not-prose">Published 11 October 2020</p>
    </header>

    <div class="post-content">
      
<!-- Twitter embed JavaScript -->
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>The other day Nate Berkopec asked this question on Twitter:</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">What is your least favorite part about Ruby?</p>&mdash; Nate Berkopec (@nateberkopec) <a href="https://twitter.com/nateberkopec/status/1314235606705340418?ref_src=twsrc%5Etfw">October 8, 2020</a></blockquote>

<p>The thread had some thought provoking responses. I wanted to gather up some of the highlights for posterity and add my own commentary.</p>

<p>In summary:</p>

<ul id="markdown-toc">
  <li><a href="#class-variables-are-confusing" id="markdown-toc-class-variables-are-confusing">Class variables are confusing</a></li>
  <li><a href="#standard-library-is-too-low-level" id="markdown-toc-standard-library-is-too-low-level">Standard library is too low-level</a></li>
  <li><a href="#meta-programming-complexity" id="markdown-toc-meta-programming-complexity">Meta-programming complexity</a></li>
  <li><a href="#block-vs-proc-vs-lambda" id="markdown-toc-block-vs-proc-vs-lambda">Block vs proc vs lambda</a></li>
</ul>

<h2 id="class-variables-are-confusing">Class variables are confusing</h2>

<blockquote class="twitter-tweet" data-conversation="none"><p lang="en" dir="ltr">class variables! I can never figure out how they work</p>&mdash; Aaron Patterson (@tenderlove) <a href="https://twitter.com/tenderlove/status/1314237029878652928?ref_src=twsrc%5Etfw">October 8, 2020</a></blockquote>

<p>Class variables in Ruby look a bit like instance variables, but they begin with <code>@@</code>.</p>

<p>To confuse matters further Ruby also has class instance variables, which makes searching for documentation confusing if you don’t know what you’re looking for.</p>

<p>This is one of those Ruby features that’s best left alone unless you have a <em>very</em> convincing use case that you can’t <em>possibly</em> solve using anything else.</p>

<h2 id="standard-library-is-too-low-level">Standard library is too low-level</h2>

<blockquote class="twitter-tweet" data-conversation="none"><p lang="en" dir="ltr">Much of the standard library is too low-level, like Net::HTTP, which leads to every Rails app bundling five different third-party HTTP clients.</p>&mdash; George Claghorn (@georgeclaghorn) <a href="https://twitter.com/georgeclaghorn/status/1314237870782251008?ref_src=twsrc%5Etfw">October 8, 2020</a></blockquote>

<p>Ruby is definitely showing its age a bit with the standard library. With Ruby 3.0 the standard library is going to become default gems. That might encourage some modernization in the interfaces provided so that more apps can rely on an out-of-the-box solution, rather than bundling their own.</p>

<p>Choice is a good thing. The fact that there are many alternatives to most parts of the standard library is a sign of a healthy ecosystem. But at the same time it would be nice if the libraries Ruby shipped with were good enough for simple scripts without having to pull in external libraries.</p>

<p>For simple HTTP requests when you don’t care about anything other than the body you can always use <code>open-uri</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'open-uri'</span>
<span class="n">body</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">read</span>
</code></pre></div></div>

<p>For anything more complex, you’ll want to turn to a third-party library.</p>

<h2 id="meta-programming-complexity">Meta-programming complexity</h2>

<blockquote class="twitter-tweet" data-conversation="none"><p lang="en" dir="ltr">Meta-programming magic.<br /><br />Makes it awkward to discover where a called method is actually defined. Particularly frustrating for people just learning Ruby.<br /><br />Hopefully tools like sorbet and rbs will help solve the discovery problem to some extent.</p>&mdash; Chris Mytton (@chrismytton) <a href="https://twitter.com/chrismytton/status/1314236518790311936?ref_src=twsrc%5Etfw">October 8, 2020</a></blockquote>

<p>My own contribution to the thread.</p>

<p>Ruby has some incredibly powerful and ergonomic metaprogramming features for creating DSLs. Yet this power and ease-of-use leads people to overuse and abuse metaprogramming, leading to hard-to-follow and hard-to-debug programs.</p>

<p>It seems enticing writing a DSL that captures the essence of the problem you’re solving. In reality code that isn’t written in a standard way (i.e. with classes and methods) is harder to understand because you have to understand the DSL before you can understand what the code in the DSL is doing.</p>

<h2 id="block-vs-proc-vs-lambda">Block vs proc vs lambda</h2>

<blockquote class="twitter-tweet" data-conversation="none"><p lang="en" dir="ltr">Block vs proc vs lambda is one of the least elegant bits with the most complexity compared to expressiveness.</p>&mdash; Noah Gibbs (@codefolio) <a href="https://twitter.com/codefolio/status/1314237138393858050?ref_src=twsrc%5Etfw">October 8, 2020</a></blockquote>

<p>Ruby has too many ways of creating and calling code closures. There are some subtle differences between the various forms. When faced with a situation where I want to use them I can never remember what the trade-offs between them are.</p>

<p>This isn’t an easy problem to solve, since there’s code out there using all the different forms. It’s one of those things that you get used to, but is a definite sharp edge for people that are new to the language.</p>

<h2 class="no_toc" id="conclusion">Conclusion</h2>

<p>Ruby fared pretty well in this thread, considering it’s a 25 year old language. There are definitely some rough edges, but I still find it to be one of the quickest and most fun ways to go from idea to working code.</p>

<hr />

<h2 class="no_toc" id="im-starting-a-newsletter">I’m starting a newsletter!</h2>

<p>If you’ve enjoyed reading this post then you might also enjoy <a href="/newsletter/">my newsletter</a>, where I’ll be writing about Ruby, software, tech and life.</p>

    </div>

    <footer class="mt-12 pt-6 not-prose">
      
    </footer>

  </article>

</div>

      </main>

      <footer class="mt-20 pt-10 border-t border-zinc-200 dark:border-zinc-700">
        <div class="flex items-center mb-6">
          <a class="mr-auto font-display font-semibold text-4xl text-accent hover:text-accent-hover transition-colors" href="/">Chris Mytton</a>

        </div>
        <div class="flex flex-wrap gap-5 text-xl font-sans">
  <a class="link-subtle" href="/">Home</a>
  <a class="link-subtle" href="/articles/">Articles</a>
  <a class="link-subtle" href="/videos/">Videos</a>
</div>

      </footer>
    </div>

  </body>

</html>
